---
title: "Approximate Bayesian inference in `epidist`"
description: "..."
output: 
  bookdown::html_document2:
    fig_caption: yes
    code_folding: show
    number_sections: true
pkgdown:
  as_is: true
# csl: https://raw.githubusercontent.com/citation-style-language/styles/master/apa-numeric-superscript-brackets.csl
link-citations: true
vignette: >
  %\VignetteIndexEntry{Getting started with epidist}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
bibliography: references.bib
---

```{r setup, include=FALSE}
# exclude compile warnings from cmdstanr
knitr::opts_chunk$set(
  fig.path = "figures/epidist-",
  cache = TRUE,
  collapse = TRUE,
  comment = "#>",
  message = FALSE,
  warning = FALSE,
  error = FALSE
)
```

# Background

* What is the default inference method used in `epidist` (HMC)
  * How does it work
  * Why is it the default
  * What are its strengths
  * What are its drawbacks
* What are the alternatives
  * Why might you consider them

## Laplace 

* Briefly, how does it work

## Variational inference

* Briefly, how does it work

## Pathfinder

* Briefly, how does it work

# Demonstration

```{r load-requirements}
library(epidist)
library(data.table)
library(purrr)
library(ggplot2)
library(gt)
library(dplyr)
```

```{r}
meanlog <- 1.8
sdlog <- 0.5
obs_time <- 25
sample_size <- 200

obs_cens_trunc <- simulate_gillespie() |>
  simulate_secondary(
    meanlog = meanlog,
    sdlog = sdlog
  ) |>
  observe_process() |>
  filter_obs_by_obs_time(obs_time = obs_time)

obs_cens_trunc_samp <- obs_cens_trunc[sample(seq_len(.N), sample_size, replace = FALSE)]

data <- epidist_prepare(obs_cens_trunc_samp, model = "latent_individual")

fit_hmc <- epidist(data = data, algorithm = "sampling")
fit_laplace <- epidist(data = data, algorithm = "laplace")
fit_variational <- epidist(data = data, algorithm = "meanfield")
fit_pathfinder <- epidist(data = data, algorithm = "pathfinder")
```

## Bibliography {-}
