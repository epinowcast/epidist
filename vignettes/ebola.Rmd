---
title: "Using `epidist` to estimate..."
description: "A more detailed guide to using the `epidist` R package"
output: 
  bookdown::html_document2:
    fig_caption: yes
    code_folding: show
    number_sections: true
pkgdown:
  as_is: true
# csl: https://raw.githubusercontent.com/citation-style-language/styles/master/apa-numeric-superscript-brackets.csl
link-citations: true
vignette: >
  %\VignetteIndexEntry{Getting in depth with epidist}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
# exclude compile warnings from cmdstanr
knitr::opts_chunk$set(
  fig.path = "figures/epidist-",
  cache = TRUE,
  collapse = TRUE,
  comment = "#>",
  message = FALSE,
  warning = FALSE,
  error = FALSE
)
```

```{r load-requirements}
library(epidist)
library(data.table)
library(purrr)
library(ggplot2)
```

# Data preparation

```{r}
data("sierra_leone_ebola_data")
```

Ebola data available in package.
Has `r nrow(sierra_leone_ebola_data)` rows, each corresponding to a unique case report.

```{r}
head(sierra_leone_ebola_data)
```

```{r}
sierra_leone_ebola_data |>
  dplyr::filter(id %% 10 == 0) |>
  ggplot() +
    geom_point(aes(x = date_of_symptom_onset, y = id), col = "#56B4E9") +
    geom_point(aes(x = date_of_sample_tested, y = id), col = "#009E73") +
    labs(x = "", y = "Case ID") +
    theme_minimal()
```

* Clean it up into the right format -- I guess can use the paper code here

# Model fitting

* Fit the lognormal model
* Fit the gamma model
* Other things here? Convergence checking?

# Post-processing

* Extract posterior predictions (of something) from both models -- posterior predictive checking?
* Compare the models. Give suggestion of which is a better fit
* Translate fitted distribution to probability mass function

## Bibliography {-}