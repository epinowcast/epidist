% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/marginal_model.R
\name{as_epidist_marginal_model.epidist_linelist_data}
\alias{as_epidist_marginal_model.epidist_linelist_data}
\title{The marginal model method for \code{epidist_linelist_data} objects}
\usage{
\method{as_epidist_marginal_model}{epidist_linelist_data}(data, obs_time_threshold = 2, weight = NULL, ...)
}
\arguments{
\item{data}{An \code{epidist_linelist_data} object}

\item{obs_time_threshold}{Ratio used to determine threshold for setting
relative observation times to Inf. Observation times greater than
\code{obs_time_threshold} times the maximum delay will be set to Inf to improve
model efficiency by reducing the number of unique observation times.
Default is 2.}

\item{weight}{A column name to use for weighting the data in the
likelihood. Default is NULL. Internally this is used to define the 'n'
column of the returned object.}

\item{...}{Not used in this method.}
}
\description{
This method converts linelist data to a marginal model format by calculating
delays between primary and secondary events, along with observation times and
censoring windows. The likelihood used is imported from the
\href{https://primarycensored.epinowcast.org/}{primarycensored} package
which handles censoring in both primary and secondary events as well as
truncation due to observation times. In principle, this method should be
more accurate and more computationally efficient than the latent model
(\code{\link[=as_epidist_latent_model]{as_epidist_latent_model()}}) approach in most setting except when the
number of unique strata approaches the number of observations.
}
\details{
When a formula is specified in \code{\link[=epidist]{epidist()}}, the data will be transformed
using \code{\link[=epidist_transform_data_model.epidist_marginal_model]{epidist_transform_data_model.epidist_marginal_model()}} to prepare it
for model fitting. This transformation summarises the data by counting unique
combinations of delays, observation times, censoring windows and any
variables in the model formula.
}
\examples{
sierra_leone_ebola_data |>
  as_epidist_linelist_data(
    pdate_lwr = "date_of_symptom_onset",
    sdate_lwr = "date_of_sample_tested"
  ) |>
  as_epidist_marginal_model()
}
\seealso{
Other marginal_model: 
\code{\link{as_epidist_marginal_model}()},
\code{\link{as_epidist_marginal_model.epidist_aggregate_data}()},
\code{\link{epidist_family_model.epidist_marginal_model}()},
\code{\link{epidist_formula_model.epidist_marginal_model}()},
\code{\link{epidist_transform_data_model.epidist_marginal_model}()},
\code{\link{is_epidist_marginal_model}()},
\code{\link{new_epidist_marginal_model}()}
}
\concept{marginal_model}
