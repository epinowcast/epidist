% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/marginal_model.R
\name{as_epidist_marginal_model.epidist_linelist_data}
\alias{as_epidist_marginal_model.epidist_linelist_data}
\title{The marginal model method for \code{epidist_linelist_data} objects}
\usage{
\method{as_epidist_marginal_model}{epidist_linelist_data}(data, obs_time_threshold = 2, weight = NULL, ...)
}
\arguments{
\item{data}{An \code{epidist_linelist_data} object}

\item{obs_time_threshold}{Ratio used to determine threshold for setting
relative observation times to Inf. Observation times greater than
\code{obs_time_threshold} times the maximum delay will be set to Inf to improve
model efficiency by reducing the number of unique observation times.
Default is 2.}

\item{weight}{A column name to use for weighting the data in the
likelihood. Default is NULL. Internally this is used to define the 'n'
column of the returned object. See details.}

\item{...}{Not used in this method.}
}
\description{
The marginal model method for \code{epidist_linelist_data} objects
}
\details{
To ensure efficient computation, the model automatically
identifies groups of individuals in the data that contribute identically
to the likelihood, and evaluates the likelihood at the group level. Groups
are defined by unique combinations of: {ptime_upr, stime_upr, stime_lwr,
relative_obs_time, pwindow, swindow, and other_vars}, where the first six
fields are defined by \code{as_epidist_linelist_data()} (see also the \href{linelihttps://epidist.epinowcast.org/dev/articles/epidist.html#data}{getting started vignette}), # nolint
and where \code{other_vars} includes other variables used in the model forumla,
(e.g. age, sex, or location).

The \code{weight} option can be used for convenience when working with data that
contain too many individuals to represent easily in linelist format. For
example, \code{prepped} and \code{prepped_weighted} would be
interpreted identically by epidist():

\if{html}{\out{<div class="sourceCode">}}\preformatted{## Prep as a linelist
prepped <- linelist |>
  as_epidist_linelist_data() |>
  as_epidist_marginal_model(linelist)
}\if{html}{\out{</div>}}

or

\if{html}{\out{<div class="sourceCode">}}\preformatted{## Aggregate by relevant variables
prepped_weighted <- linelist |>
 as_epidist_linelist_data() |>
 # summarise by unique combinations of variables
  group_by(ptime_upr, stime_upr, stime_lwr,
           relative_obs_time, pwindow, swindow,
           other_vars) |>
summarise(n = n())
# prep with weight option
as_epidist_marginal_model(linelist, weight = "n")
}\if{html}{\out{</div>}}
}
\seealso{
Other marginal_model: 
\code{\link{as_epidist_marginal_model}()},
\code{\link{epidist_family_model.epidist_marginal_model}()},
\code{\link{epidist_formula_model.epidist_marginal_model}()},
\code{\link{is_epidist_marginal_model}()},
\code{\link{new_epidist_marginal_model}()}
}
\concept{marginal_model}
